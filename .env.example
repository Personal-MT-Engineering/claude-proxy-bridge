# Claude Proxy Bridge Configuration

# Ports for each model proxy
OPUS_PORT=5001
SONNET_PORT=5002
HAIKU_PORT=5003

# WebSocket bridge port
BRIDGE_PORT=5000

# Host to bind to (0.0.0.0 for all interfaces, 127.0.0.1 for local only)
HOST=127.0.0.1

# API key for authentication (clients must send this in Authorization header)
API_KEY=local-proxy

# Claude CLI path (leave empty for auto-detection)
CLAUDE_CLI_PATH=

# Request timeout in seconds
REQUEST_TIMEOUT=300

# Max concurrent requests per proxy
MAX_CONCURRENT=5

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# ─── Smart Routing ───

# Enable smart routing (model="auto" analyzes requests and picks the best model)
SMART_ROUTING=true

# Token threshold for long-context routing (above this → Opus)
ROUTING_LONG_CONTEXT_THRESHOLD=50000

# Max fallback attempts when a model fails (0 = no fallback)
ROUTING_MAX_FALLBACK_ATTEMPTS=2

# Override primary model per scenario (leave empty for defaults)
# Defaults: complex=opus, code=sonnet, long=opus, moderate=sonnet, simple=haiku
# ROUTING_MODEL_COMPLEX=claude-opus-4-6
# ROUTING_MODEL_CODE=claude-sonnet-4-6
# ROUTING_MODEL_LONG=claude-opus-4-6
# ROUTING_MODEL_MODERATE=claude-sonnet-4-6
# ROUTING_MODEL_SIMPLE=claude-haiku-4-5-20251001

# Override fallback chains per scenario (comma-separated model IDs, tried in order)
# ROUTING_FALLBACK_COMPLEX=claude-opus-4-6,claude-sonnet-4-6,claude-haiku-4-5-20251001
# ROUTING_FALLBACK_CODE=claude-sonnet-4-6,claude-opus-4-6,claude-haiku-4-5-20251001
# ROUTING_FALLBACK_LONG=claude-opus-4-6,claude-sonnet-4-6
# ROUTING_FALLBACK_MODERATE=claude-sonnet-4-6,claude-haiku-4-5-20251001,claude-opus-4-6
# ROUTING_FALLBACK_SIMPLE=claude-haiku-4-5-20251001,claude-sonnet-4-6
